browserWidth=$(window).outerWidth();$(window).resize(function(){browserWidth=$(window).outerWidth()});$(document).ready(function(){$navToggle=$(".nav-toggle");$nav=$("#navigation");$page=$("#page");function a(){if(browserWidth<993){$nav.addClass("mobile-hidden").removeClass("narrow").addClass("expanded");$page.removeClass("nav-narrow").removeClass("nav-expanded");$navToggle.removeClass("nav-hidden nav-visible");f()}else{$page.addClass("nav-expanded")}}function e(){$nav.removeClass("mobile-hidden").addClass("mobile-visible");$navToggle.addClass("nav-visible").removeClass("nav-hidden");$page.addClass("nav-visible").removeClass("nav-hidden");$("#navigation-block").removeClass("mobile-hidden").addClass("mobile-visible")}function f(){$nav.removeClass("mobile-visible").addClass("mobile-hidden");$navToggle.addClass("nav-hidden").removeClass("nav-visible");$page.addClass("nav-hidden").removeClass("nav-visible");$("#navigation-block").removeClass("mobile-visible").addClass("mobile-hidden")}$navToggle.on("click",function(){if($nav.hasClass("mobile-hidden")){e();return false}if($nav.hasClass("mobile-visible")){f();return false}});$page.on("click",function(){if(browserWidth<993){f()}});a();$(window).resize(function(){a()});$("#thumbnail").change(function(){d(this)});function d(h){if(h.files&&h.files[0]){var g=new FileReader();g.onload=function(i){$("#thumbnail-img").attr("src",i.target.result)};g.readAsDataURL(h.files[0]);$("#thumbnail-img").css("display","block")}}window.setTimeout(function(){$(".alert").fadeTo(500,0).slideUp(500,function(){$(this).remove()})},5000);$("html, body").css("height",$(document).height());$("#navigation-block").css("height",$("#page").height());$(".datetimepicker").datetimepicker({locale:"nl",calendarWeeks:true,showClose:true,toolbarPlacement:"top"});var c=function(h,g){g.children().each(function(){$(this).width($(this).width())});return g};$(".sortable").sortable({helper:c,axis:"y",cancel:".disabled",update:function(g,h){var i="";$(".sortable tr").not(".child").each(function(j){if(i==""){i=$(this).data("id")}else{i+=","+$(this).data("id")}});$.post("/_admin/page/ajax",{order:i});$("#sortState").addClass("updated")}}).disableSelection();$("#sortState").click(function(){if($(this).hasClass("updated")){location.reload()}if($(this).hasClass("enabled")){$(this).removeClass("enabled");$(this).html('<a><i class="fa fa-sort"></i> Sorteren uitschakelen</a>');$("table.table.table-sort tbody").removeClass("disabled");$(".table-sort tbody tr.child").css("display","none")}else{$(this).addClass("enabled");$(this).html('<a><i class="fa fa-sort"></i> Sorteren inschakelen</a>');$(".table-sort tbody").addClass("disabled");$(".table-sort tbody tr.child").css("display","table-row")}});$("#id_parent").change(function(){$("#id_parent option:selected").each(function(){if($(this).val()>0){$("#page form").attr("action","/_admin/page/sub")}else{$("#page form").attr("action","/_admin/page/edit")}})}).change();var b=[];$("div.row span[data-label=ip]").each(function(){b.push({query:$(this).text()})});$.post("http://ip-api.com/batch?fields=country,city,status,message",JSON.stringify(b),function(g){$("div.row span[data-label=location]").each(function(){var h=g.shift();if(h.status=="success"){$(this).text(h.city+", "+h.country+" ")}else{$(this).text("error: "+h.message)}})},"json")});